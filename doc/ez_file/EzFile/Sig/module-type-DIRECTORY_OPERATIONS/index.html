<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>DIRECTORY_OPERATIONS (ez_file.EzFile.Sig.DIRECTORY_OPERATIONS)</title><link rel="stylesheet" href="../../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">ez_file</a> &#x00BB; <a href="../../index.html">EzFile</a> &#x00BB; <a href="../index.html">Sig</a> &#x00BB; DIRECTORY_OPERATIONS</nav><header class="odoc-preamble"><h1>Module type <code><span>Sig.DIRECTORY_OPERATIONS</span></code></h1><p>This modules provides functions to create directories, read, iter or remove directories, recursively or not.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div><div class="spec-doc"><p>Type of a filename. It is <code>string</code> in <code>FileString</code> and <code>FileGen.t</code> in <code>FileGen</code>.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-selector" class="anchored"><a href="#type-selector" class="anchor"></a><code><span><span class="keyword">type</span> selector</span></code></div><div class="spec-doc"><p>Type of the value used to create filters when iterating on files and directories.</p></div></div><div class="odoc-spec"><div class="spec exception" id="exception-NotADirectory" class="anchored"><a href="#exception-NotADirectory" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">NotADirectory</span> <span class="keyword">of</span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>This exception is raised when one of the following functions is called with a non-directory argument</p></div></div><div class="odoc-spec"><div class="spec value" id="val-make_dir" class="anchored"><a href="#val-make_dir" class="anchor"></a><code><span><span class="keyword">val</span> make_dir : <span>?mode:int <span class="arrow">&#45;&gt;</span></span> <span>?p:bool <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>make_dir ?mode ?p filename</code> creates a directory <code>filename</code>, if it does not already exist. It fails with <code>NotADirectory</code> if the file already exists, but is not a directory. The <code>mode</code> argument is the Unix permissions (0o755 by default). The <code>p</code> argument controls whether parents directories should be created as well, if they don't exist, instead of failing.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-onedir" class="anchored"><a href="#val-onedir" class="anchor"></a><code><span><span class="keyword">val</span> onedir : <a href="#type-selector">selector</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-recdir" class="anchored"><a href="#val-recdir" class="anchor"></a><code><span><span class="keyword">val</span> recdir : <a href="#type-selector">selector</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-remove_dir" class="anchored"><a href="#val-remove_dir" class="anchor"></a><code><span><span class="keyword">val</span> remove_dir : <span>?all:bool <span class="arrow">&#45;&gt;</span></span> <span>?glob:string <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>remove_dir ?all filename</code> removes directory <code>filename</code>, or complains the <code>NotADirectory</code> if it does not exist. The <code>all</code> argument controls whether the function should recursively remove all files and sub-directories included as well. If <code>glob</code> is specified, it is called to select files to remove based on their basename, and the directories are not deleted even if <code>all</code> is <code>true</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-select" class="anchored"><a href="#val-select" class="anchor"></a><code><span><span class="keyword">val</span> select : 
  <span>?deep:bool <span class="arrow">&#45;&gt;</span></span>
  <span>?dft:<span>[ `After <span>| `Before</span> ]</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?glob:string <span class="arrow">&#45;&gt;</span></span>
  <span>?path:string <span class="arrow">&#45;&gt;</span></span>
  <span>?ignore:string <span class="arrow">&#45;&gt;</span></span>
  <span>?kinds:<span><span class="xref-unresolved">Unix</span>.file_kind list</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?filter:<span>( <span>bool <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?follow_links:bool <span class="arrow">&#45;&gt;</span></span>
  <span>?error:<span>( <span>exn <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit )</span> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-selector">selector</a></span></code></div><div class="spec-doc"><p><code>select ?deep ?dft ?glob ?filter_rec ?filter_fun ?follow_links
     ?error ()</code> creates a selctor to customize a file iterator.</p><p>The <code>deep</code> and <code>dft</code> arguments controls whether function should recurse (false by default) in sub-directories. If <code>deep</code> is <code>true</code>, and <code>~dft</code> is not specified, the files are listed in breadth-first mode (<code>a,b,a/x,b/x,a/x/y</code> for example). If <code>~dft</code> is <code>`Before</code>, the files are listed in depth-first mode, and the ancestors are before their children. If <code>~dft</code> is <code>`After</code>, the are after their children.</p><p>The <code>glob</code>, <code>path</code> and <code>ignore</code> arguments can be used to filter the files with regular expressions. <code>glob</code> is used to choose the files to keep based on their basenames, it is not used for the recursion itself. <code>path</code> is used to choose the files to keep based on the path, it is not used for the recursion itself. <code>ignore</code> is used to choose the files to ignore, based on their paths, both during the iteration and the recursion.</p><p>The <code>kinds</code> argument can be used to restrict the files to the ones of a particular kind.</p><p>The <code>filter</code> argument is used to select the files to keep. <code>filter for_rec path</code> should return <code>true</code> if the file is ok, <code>false</code> otherwise. <code>for_rec</code> is <code>true</code> if <code>filter</code> is called to check a directory for recursion, <code>false</code> if it is called for the iteration.</p><p>The <code>follow_links</code> argument is used to decide if a link to directory should be followed (when <code>deep</code> is also set).</p><p>The <code>error</code> argument is called when an error occurs, with <code>error
     exn filename</code>. The default behavior is to ignore errors.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-read_dir" class="anchored"><a href="#val-read_dir" class="anchor"></a><code><span><span class="keyword">val</span> read_dir : <span>?select:<a href="#type-selector">selector</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>string array</span></span></code></div><div class="spec-doc"><p><code>read_dir ?select dir</code> returns the files contained in the directory <code>dir</code>, recursively. Filenames start from the root of the given directory, i.e. a full filename would be <code>dir / file</code>.</p><p>In a directory, files are sorted in lexicographical order of their names.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-read_dir_to_list" class="anchored"><a href="#val-read_dir_to_list" class="anchor"></a><code><span><span class="keyword">val</span> read_dir_to_list : <span>?select:<a href="#type-selector">selector</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>string list</span></span></code></div><div class="spec-doc"><p>Same as <code>read_dir</code>, but returns a list instead of an array</p></div></div><div class="odoc-spec"><div class="spec value" id="val-iter_dir" class="anchored"><a href="#val-iter_dir" class="anchor"></a><code><span><span class="keyword">val</span> iter_dir : <span>?select:<a href="#type-selector">selector</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>f:<span>( <span>string <span class="arrow">&#45;&gt;</span></span> unit )</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Same as <code>read_dir</code>, but calls a function on every file and directory. It is not equivalent to using <code>read_dir</code> and then itering on the result, as <code>iter_dir</code> the function is called during the traversal, not after, so concurrent modifications to the directory might become visible.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-iterator" class="anchored"><a href="#val-iterator" class="anchor"></a><code><span><span class="keyword">val</span> iterator : <span>?select:<a href="#type-selector">selector</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="arrow">&#45;&gt;</span></span> <span>string option</span></span></code></div><div class="spec-doc"><p><code>iterator ?select dir</code> creates an iterator on directory <code>dir</code>. The iterator is a function that returns <code>None</code> when finished, or <code>Some file</code> with the next file to iter on.</p></div></div><p><code>make_select f</code> transforms <code>f</code>, a function that takes an optional selector, into a function that builds the selector on the fly.</p><p>For example: let () = EzFile.make_select EzFile.iter_dir ~deep:true ~f:(fun path -&gt; ...) dirname</p><p>which is equivalent to: let () = let select = EzFile.select ~deep:true () in EzFile.iter_dir ~select ~f:(fun path -&gt; ...) dirname</p><div class="odoc-spec"><div class="spec value" id="val-make_select" class="anchored"><a href="#val-make_select" class="anchor"></a><code><span><span class="keyword">val</span> make_select : 
  <span><span>( <span>?select:<a href="#type-selector">selector</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?deep:bool <span class="arrow">&#45;&gt;</span></span>
  <span>?dft:<span>[ `After <span>| `Before</span> ]</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?glob:string <span class="arrow">&#45;&gt;</span></span>
  <span>?path:string <span class="arrow">&#45;&gt;</span></span>
  <span>?ignore:string <span class="arrow">&#45;&gt;</span></span>
  <span>?kinds:<span><span class="xref-unresolved">Unix</span>.file_kind list</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?filter:<span>( <span>bool <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?follow_links:bool <span class="arrow">&#45;&gt;</span></span>
  <span>?error:<span>( <span>exn <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-mkdir" class="anchored"><a href="#val-mkdir" class="anchor"></a><code><span><span class="keyword">val</span> mkdir : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>mkdir filename mode</code> simply creates the directory <code>filename</code> with permissions <code>mode</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-readdir" class="anchored"><a href="#val-readdir" class="anchor"></a><code><span><span class="keyword">val</span> readdir : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>string array</span></span></code></div><div class="spec-doc"><p><code>readdir filename</code> returns the files contained in directory <code>filename</code> as an array of strings. The strings are sorted in lexicographical order.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-rmdir" class="anchored"><a href="#val-rmdir" class="anchor"></a><code><span><span class="keyword">val</span> rmdir : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>rmdir filename</code> removes directory <code>filename</code>, or fails if it does not exist or is not a directory.</p></div></div></div></body></html>